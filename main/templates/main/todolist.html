{% extends 'main/layout.html' %}
{% load static %} <!-- Завантаження static тут -->

{% block title %}Ту ду лист{% endblock %}

{% block content %}
    <div class="todo-container">
        <h1>to-do list</h1>

        <!-- Підключення CSS -->
        <link rel="stylesheet" href="{% static 'main/css/todolist.css' %}">

        <!-- Форма для додавання задач -->
        <form method="POST" action="{% url 'task-create' %}">
            {% csrf_token %}
            <div class="todo-form">
                <input id="taskInput" name="text" type="text" placeholder="Введіть задачу" required>
                <button type="submit" class="btn btn-primary">Додати задачу</button>
            </div>
        </form>

        <!-- Список задач -->
        <ul id="taskList" class="todo-list">
            {% for task in tasks %}
                <li class="task-item">
                    <form method="POST" action="{% url 'task-update' task.id %}" class="d-flex align-items-center">
                        {% csrf_token %}
                        <input type="checkbox" 
                               name="is_completed" 
                               {% if task.is_completed %}checked{% endif %} 
                               onchange="this.form.submit()">
                        <span class="task-text ms-2">{{ task.text }}</span>
                    </form>
                    <form method="POST" action="{% url 'task-delete' task.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger">Видалити</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
